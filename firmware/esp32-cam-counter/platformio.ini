; PlatformIO Project Configuration File
; Perth Traffic Watch - ESP32-CAM Vehicle Counter
;
; Build: pio run
; Upload: pio run --target upload
; Monitor: pio device monitor

[env:esp32cam]
platform = espressif32
board = esp32cam
framework = arduino

; Serial monitor speed
monitor_speed = 115200

; Partition scheme with space for ML model
board_build.partitions = huge_app.csv

; Build flags
build_flags =
    -DCORE_DEBUG_LEVEL=1
    -DBOARD_HAS_PSRAM
    -mfix-esp32-psram-cache-issue

; Library dependencies
lib_deps =
    ; TensorFlow Lite Micro for ESP32
    ; https://github.com/tanakamasayuki/Arduino_TensorFlowLite_ESP32

    ; HTTP client for data transmission
    ESP Async WebServer

    ; JSON handling
    bblanchon/ArduinoJson @ ^6.21.0

    ; Power management
    ; esp32-powermanagement

; Extra scripts (optional)
; extra_scripts = pre:scripts/version.py

[env:esp32cam_debug]
extends = env:esp32cam
build_type = debug
build_flags =
    ${env:esp32cam.build_flags}
    -DCORE_DEBUG_LEVEL=5
